# App Store Connect 产品创建指南

## 概述

由于 App Store Connect API **不支持**创建内购商品，必须手动在网站创建。本指南提供详细步骤和配置模板。

## 产品配置模板

所有产品信息已整理在：`ios/App/Products_Config.json`

## 创建步骤

### 第一步：创建订阅组

订阅产品必须属于一个订阅组。

1. 登录 [App Store Connect](https://appstoreconnect.apple.com)
2. 选择你的 App
3. 进入 **"功能"** → **"App 内购买项目"**
4. 点击 **"订阅组"** 标签
5. 点击 **"+"** 创建新组

**创建两个订阅组**：

#### 订阅组 1：基础版
- **参考名称**：基础版订阅组
- **显示名称**：基础版

#### 订阅组 2：高级版
- **参考名称**：高级版订阅组
- **显示名称**：高级版

### 第二步：创建订阅产品

#### 产品 1：基础版月付

1. 在 **"App 内购买项目"** 页面
2. 点击 **"+"** → 选择 **"自动续订订阅"**
3. 填写信息：

**基本信息**：
- **产品ID**：`com.beatsync.subscription.basic.monthly`
- **参考名称**：基础版月付
- **订阅组**：选择"基础版订阅组"

**订阅期限**：
- **持续时间**：1 个月

**价格和可用性**：
- **价格**：15 CNY
- **可用地区**：所有地区（或选择特定地区）

**本地化信息**（中文）：
- **显示名称**：基础版月付
- **描述**：每月50次高清下载，免费处理无限次

**本地化信息**（英文）：
- **显示名称**：Basic Monthly
- **描述**：50 HD downloads per month, unlimited processing

**审核信息**：
- **审核备注**：这是 BeatSync 应用的基础版订阅，提供每月50次高清视频下载服务。

4. 点击 **"创建"**

#### 产品 2：基础版年付

重复上述步骤，使用以下信息：
- **产品ID**：`com.beatsync.subscription.basic.yearly`
- **参考名称**：基础版年付
- **订阅组**：基础版订阅组
- **持续时间**：1 年
- **价格**：99 CNY
- **描述**：每年600次高清下载，免费处理无限次

#### 产品 3：高级版月付

- **产品ID**：`com.beatsync.subscription.premium.monthly`
- **参考名称**：高级版月付
- **订阅组**：高级版订阅组
- **持续时间**：1 个月
- **价格**：69 CNY
- **描述**：每月1000次高清下载，免费处理无限次

#### 产品 4：高级版年付

- **产品ID**：`com.beatsync.subscription.premium.yearly`
- **参考名称**：高级版年付
- **订阅组**：高级版订阅组
- **持续时间**：1 年
- **价格**：499 CNY
- **描述**：每年12000次高清下载，免费处理无限次

### 第三步：创建一次性购买产品

#### 产品 5：10次下载包

1. 点击 **"+"** → 选择 **"非消耗型产品"**
2. 填写信息：

**基本信息**：
- **产品ID**：`com.beatsync.pack.10`
- **参考名称**：10次下载包

**价格和可用性**：
- **价格**：5 CNY

**本地化信息**（中文）：
- **显示名称**：10次下载包
- **描述**：一次性购买，10次高清下载

**本地化信息**（英文）：
- **显示名称**：10 Downloads Pack
- **描述**：One-time purchase, 10 HD downloads

3. 点击 **"创建"**

#### 产品 6：20次下载包

- **产品ID**：`com.beatsync.pack.20`
- **价格**：9 CNY
- **描述**：一次性购买，20次高清下载

#### 产品 7：50次下载包

- **产品ID**：`com.beatsync.pack.50`
- **价格**：20 CNY
- **描述**：一次性购买，50次高清下载

## 快速参考表

### 订阅产品

| 产品ID | 类型 | 价格 | 下载次数 | 订阅组 |
|--------|------|------|----------|--------|
| `com.beatsync.subscription.basic.monthly` | 自动续订 | 15 CNY/月 | 50次/月 | 基础版 |
| `com.beatsync.subscription.basic.yearly` | 自动续订 | 99 CNY/年 | 600次/年 | 基础版 |
| `com.beatsync.subscription.premium.monthly` | 自动续订 | 69 CNY/月 | 1000次/月 | 高级版 |
| `com.beatsync.subscription.premium.yearly` | 自动续订 | 499 CNY/年 | 12000次/年 | 高级版 |

### 一次性购买

| 产品ID | 类型 | 价格 | 下载次数 |
|--------|------|------|----------|
| `com.beatsync.pack.10` | 非消耗型 | 5 CNY | 10次 |
| `com.beatsync.pack.20` | 非消耗型 | 9 CNY | 20次 |
| `com.beatsync.pack.50` | 非消耗型 | 20 CNY | 50次 |

## 注意事项

1. **产品ID必须唯一**：不能与现有产品重复
2. **产品ID不能修改**：创建后无法更改
3. **订阅组必须先创建**：订阅产品必须属于一个组
4. **价格设置**：设置 CNY 价格，Apple 会自动转换其他货币
5. **状态**：创建后产品状态为"准备提交"，需要提交审核

## 测试建议

### 分阶段创建

1. **第一阶段**：先创建 1 个测试产品
   - 建议：`com.beatsync.pack.10`（最简单）
   - 用于测试购买流程
   - 验证收据验证

2. **第二阶段**：测试成功后，再创建其他产品
   - 确保流程正确
   - 避免重复创建

## 检查清单

创建完成后，检查：

- [ ] 所有 7 个产品都已创建
- [ ] 产品ID 与代码中的配置一致
- [ ] 订阅产品已正确关联到订阅组
- [ ] 价格设置正确
- [ ] 描述信息完整
- [ ] 产品状态为"准备提交"

## 相关文件

- `ios/App/Products_Config.json` - 产品配置模板
- `ios/App/Plugins/SubscriptionPlugin.swift` - 插件代码（包含产品ID配置）

