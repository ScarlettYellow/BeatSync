# 上传失败快速排查指南

## 问题现象
无法成功上传视频，控制台可能显示错误。

## 快速排查步骤

### 1. 检查后端服务是否运行

```bash
# 检查端口8000是否被占用
lsof -i :8000

# 如果没有，启动后端服务
cd web_service/backend
./start_server.sh
```

### 2. 检查浏览器控制台

打开浏览器开发者工具（F12），查看：
- **Console标签**：查看是否有错误信息
- **Network标签**：查看上传请求的状态
  - 如果看到 `/api/upload` 请求失败，点击查看详情
  - 检查响应状态码和错误信息

### 3. 常见问题

#### 问题1：后端服务未启动
**症状**：Network标签显示 "Failed to fetch" 或连接错误
**解决**：启动后端服务（见步骤1）

#### 问题2：CORS错误
**症状**：控制台显示 CORS 相关错误
**解决**：检查后端 `ALLOWED_ORIGINS` 环境变量，确保包含前端地址

#### 问题3：文件格式不支持
**症状**：上传后立即失败，返回400错误
**解决**：确保文件格式为 MP4、MOV、AVI、MKV

#### 问题4：文件过大
**症状**：上传超时或失败
**解决**：检查文件大小，Render免费层有资源限制

### 4. 查看详细日志

现在上传功能已增强日志输出，在浏览器控制台会显示：
- 上传开始信息（文件名、大小、API URL）
- 响应状态
- 成功/失败详情

根据这些日志可以快速定位问题。

## 如果问题仍然存在

请提供以下信息：
1. 浏览器控制台的完整错误信息
2. Network标签中 `/api/upload` 请求的详细信息
3. 后端服务的日志输出

