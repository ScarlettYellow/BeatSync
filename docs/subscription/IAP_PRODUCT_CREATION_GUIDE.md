# App 内购买产品创建指南

## 📋 产品总览

需要创建 **7 个产品**：

### 订阅产品（4个）
- 基础版月付
- 基础版年付
- 高级版月付
- 高级版年付

### 一次性购买（3个）
- 10次下载包
- 50次下载包
- 100次下载包

---

## 🚀 创建步骤

### 进入 App 内购买管理

1. 在 App Store Connect 中选择你的 App（BeatSync）
2. 点击左侧菜单 **"功能"** → **"App 内购买项目"**
3. 点击右上角 **"+"** → **"创建"**

---

## 📦 产品 1：基础版月付（订阅）

### 基本信息

1. **产品类型**：选择 **"自动续订订阅"**
2. **订阅组**：
   - 如果是第一个订阅产品，选择 **"创建订阅组"**
   - 订阅组名称：`BeatSync Subscriptions`
   - 如果订阅组已存在，选择现有的订阅组
3. **产品 ID**：`com.beatsync.subscription.basic.monthly` ⭐ **必须完全一致**
4. **参考名称**：`基础版月付`（仅用于内部管理）

### 订阅信息

5. **订阅时长**：`1 个月`
6. **价格**：
   - 选择价格等级或直接输入：`¥15.00`
   - 或选择对应的价格等级（通常是最低价格等级）

### 本地化信息

7. **显示名称**：`基础版月付`
8. **描述**：
   ```
   每月100次高清下载，支持无限次处理。适合轻度使用的用户。
   ```

### 审核信息（可选）

9. **审核备注**（如果需要）：
   ```
   这是订阅产品，用户每月可获得100次下载次数。
   ```

### 完成

10. 点击 **"创建"** 或 **"保存"**

---

## 📦 产品 2：基础版年付（订阅）

### 基本信息

1. **产品类型**：选择 **"自动续订订阅"**
2. **订阅组**：选择 **"BeatSync Subscriptions"**（与月付同一组）
3. **产品 ID**：`com.beatsync.subscription.basic.yearly` ⭐ **必须完全一致**
4. **参考名称**：`基础版年付`

### 订阅信息

5. **订阅时长**：`1 年`
6. **价格**：`¥99.00`

### 本地化信息

7. **显示名称**：`基础版年付`
8. **描述**：
   ```
   每年1200次高清下载，支持无限次处理。比月付更划算，适合长期使用的用户。
   ```

### 完成

9. 点击 **"创建"** 或 **"保存"**

---

## 📦 产品 3：高级版月付（订阅）

### 基本信息

1. **产品类型**：选择 **"自动续订订阅"**
2. **订阅组**：选择 **"BeatSync Subscriptions"**
3. **产品 ID**：`com.beatsync.subscription.premium.monthly` ⭐ **必须完全一致**
4. **参考名称**：`高级版月付`

### 订阅信息

5. **订阅时长**：`1 个月`
6. **价格**：`¥69.00`

### 本地化信息

7. **显示名称**：`高级版月付`
8. **描述**：
   ```
   每月300次高清下载，支持无限次处理。适合重度使用的用户。
   ```

### 完成

9. 点击 **"创建"** 或 **"保存"**

---

## 📦 产品 4：高级版年付（订阅）

### 基本信息

1. **产品类型**：选择 **"自动续订订阅"**
2. **订阅组**：选择 **"BeatSync Subscriptions"**
3. **产品 ID**：`com.beatsync.subscription.premium.yearly` ⭐ **必须完全一致**
4. **参考名称**：`高级版年付`

### 订阅信息

5. **订阅时长**：`1 年`
6. **价格**：`¥499.00`

### 本地化信息

7. **显示名称**：`高级版年付`
8. **描述**：
   ```
   每年3600次高清下载，支持无限次处理。比月付更划算，适合重度使用的用户。
   ```

### 完成

9. 点击 **"创建"** 或 **"保存"**

---

## 📦 产品 5：10次下载包（一次性购买）

### 基本信息

1. **产品类型**：选择 **"消耗型产品（Consumable）"** ⭐ **修正**
   - ✅ **正确**：选择"消耗型产品"，因为用户可以多次购买
   - ❌ **错误**：不要选择"非消耗型产品"（只能购买一次）
2. **产品 ID**：`com.beatsync.pack.10` ⭐ **必须完全一致**
3. **参考名称**：`10次下载包`

### 价格信息

4. **价格**：`¥5.00`

### 本地化信息

5. **显示名称**：`10次下载包`
6. **描述**：
   ```
   购买后获得10次下载次数。每次下载消耗1次，用完后可以再次购买。
   ```

### 完成

7. 点击 **"创建"** 或 **"保存"**

---

## 📦 产品 6：50次下载包（一次性购买）

### 基本信息

1. **产品类型**：选择 **"消耗型产品（Consumable）"** ⭐ **修正**
2. **产品 ID**：`com.beatsync.pack.50` ⭐ **必须完全一致**
3. **参考名称**：`50次下载包`

### 价格信息

4. **价格**：`¥20.00`

### 本地化信息

5. **显示名称**：`50次下载包`
6. **描述**：
   ```
   购买后获得50次下载次数。每次下载消耗1次，用完后可以再次购买。
   ```

### 完成

7. 点击 **"创建"** 或 **"保存"**

---

## 📦 产品 7：100次下载包（一次性购买）

### 基本信息

1. **产品类型**：选择 **"消耗型产品（Consumable）"** ⭐ **修正**
2. **产品 ID**：`com.beatsync.pack.100` ⭐ **必须完全一致**
3. **参考名称**：`100次下载包`

### 价格信息

4. **价格**：`¥35.00`

### 本地化信息

5. **显示名称**：`100次下载包`
6. **描述**：
   ```
   购买后获得100次下载次数。每次下载消耗1次，用完后可以再次购买。
   ```

### 完成

7. 点击 **"创建"** 或 **"保存"**

---

## ✅ 产品配置检查清单

### 订阅产品（4个）

- [ ] `com.beatsync.subscription.basic.monthly` - 基础版月付（¥15/月）
- [ ] `com.beatsync.subscription.basic.yearly` - 基础版年付（¥99/年）
- [ ] `com.beatsync.subscription.premium.monthly` - 高级版月付（¥69/月）
- [ ] `com.beatsync.subscription.premium.yearly` - 高级版年付（¥499/年）

### 一次性购买（3个）

- [ ] `com.beatsync.pack.10` - 10次下载包（¥5）- **消耗型产品** ⭐
- [ ] `com.beatsync.pack.50` - 50次下载包（¥20）- **消耗型产品** ⭐
- [ ] `com.beatsync.pack.100` - 100次下载包（¥35）- **消耗型产品** ⭐

### 验证

- [ ] 所有产品 ID 与代码中的完全一致
- [ ] 订阅产品都在同一个订阅组中
- [ ] 一次性购买产品类型为"消耗型产品（Consumable）" ⭐ **修正**
- [ ] 所有产品状态为"准备提交"或"待处理"

---

## ⚠️ 重要提示

### 产品 ID 必须完全一致

**代码中使用的产品 ID**：
```swift
"basic_monthly": "com.beatsync.subscription.basic.monthly"
"basic_yearly": "com.beatsync.subscription.basic.yearly"
"premium_monthly": "com.beatsync.subscription.premium.monthly"
"premium_yearly": "com.beatsync.subscription.premium.yearly"
"pack_10": "com.beatsync.pack.10"
"pack_50": "com.beatsync.pack.50"
"pack_100": "com.beatsync.pack.100"
```

**必须使用完整的产品 ID**（如 `com.beatsync.subscription.basic.monthly`），不能使用简化版本（如 `basic_monthly`）。

### 订阅组配置

- ✅ 所有订阅产品必须在**同一个订阅组**中
- ✅ 订阅组名称：`BeatSync Subscriptions`
- ✅ 这样用户可以在不同订阅之间切换

### 产品类型

- ✅ **订阅产品**：选择"自动续订订阅"
- ✅ **一次性购买**：选择"消耗型产品（Consumable）" ⭐ **修正**
  - ⚠️ **重要**：不要选择"非消耗型产品"（只能购买一次）
  - ✅ **正确**：选择"消耗型产品"（可以多次购买）

### 审核时间

- ⚠️ 产品创建后需要等待 Apple 审核
- ⚠️ 通常需要几分钟到几小时
- ⚠️ 在审核通过前，产品可能无法在 App 中显示

---

## 🚀 创建顺序建议

### 推荐顺序

1. **先创建订阅组**（创建第一个订阅产品时）
2. **创建 4 个订阅产品**（按顺序创建）
3. **创建 3 个一次性购买产品**（按顺序创建）

### 为什么按顺序创建？

- 订阅产品需要先创建订阅组
- 后续订阅产品可以复用同一个订阅组
- 一次性购买产品独立，可以任意顺序创建

---

## 📋 产品信息汇总表

| 产品 ID | 类型 | 价格 | 下载次数 | 订阅时长 |
|---------|------|------|----------|----------|
| `com.beatsync.subscription.basic.monthly` | 自动续订订阅 | ¥15 | 100次 | 1个月 |
| `com.beatsync.subscription.basic.yearly` | 自动续订订阅 | ¥99 | 1200次 | 1年 |
| `com.beatsync.subscription.premium.monthly` | 自动续订订阅 | ¥69 | 300次 | 1个月 |
| `com.beatsync.subscription.premium.yearly` | 自动续订订阅 | ¥499 | 3600次 | 1年 |
| `com.beatsync.pack.10` | **消耗型产品** ⭐ | ¥5 | 10次 | 可再次购买 |
| `com.beatsync.pack.50` | **消耗型产品** ⭐ | ¥20 | 50次 | 可再次购买 |
| `com.beatsync.pack.100` | **消耗型产品** ⭐ | ¥35 | 100次 | 可再次购买 |

---

## 🎯 下一步

所有产品创建完成后：

1. ✅ 等待产品审核通过（通常几分钟到几小时）
2. ⏳ 获取 App Store 共享密钥
3. ⏳ 创建沙盒测试账号
4. ⏳ 配置后端环境变量
5. ⏳ 开始测试

详细步骤请参考：
- `docs/subscription/APP_STORE_CONNECT_SETUP.md` - 完整配置指南

---

**开始创建产品吧！** 🚀
