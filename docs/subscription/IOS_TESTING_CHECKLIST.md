# iOS App 订阅系统测试检查清单

## 📋 测试前准备

### ✅ 配置检查

- [ ] StoreKit Configuration File (`Products.storekit`) 已创建
- [ ] 产品 ID 已更新为完整格式（`com.beatsync.*`）
- [ ] 在 Xcode Scheme 中选择了 `Products.storekit`
- [ ] App 可以正常编译和运行
- [ ] 没有编译错误或警告

### ✅ 文件检查

- [ ] `ios/App/Products.storekit` 文件存在
- [ ] `ios/App/SubscriptionPlugin.swift` 文件存在
- [ ] `ios/App/SubscriptionPlugin.m` 文件存在
- [ ] 产品 ID 配置正确（7 个产品）

---

## 🧪 功能测试

### 测试 1：订阅可用性检查

**步骤**：
1. 运行 App
2. 在控制台或前端代码中调用 `checkAvailability()`

**预期结果**：
- ✅ 返回 `{ available: true, message: "设备支持应用内购买" }`

**实际结果**：
- [ ] ✅ 通过
- [ ] ❌ 失败（错误信息：________）

---

### 测试 2：产品列表获取

**步骤**：
1. 打开订阅管理
2. 点击"查看订阅套餐"
3. 查看产品列表

**预期结果**：
- ✅ 显示 7 个产品
- ✅ 每个产品显示名称、价格、描述
- ✅ 有"购买"按钮

**实际结果**：
- [ ] ✅ 通过（显示 ___ 个产品）
- [ ] ❌ 失败（错误信息：________）

**产品列表**：
- [ ] 基础版月付（¥15.00）
- [ ] 基础版年付（¥99.00）
- [ ] 高级版月付（¥69.00）
- [ ] 高级版年付（¥499.00）
- [ ] 10次下载包（¥5.00）
- [ ] 50次下载包（¥20.00）
- [ ] 100次下载包（¥35.00）

---

### 测试 3：购买流程

**步骤**：
1. 选择"基础版月付"
2. 点击"购买"按钮
3. 完成购买（本地模拟）

**预期结果**：
- ✅ 弹出 StoreKit 购买界面
- ✅ 购买立即完成
- ✅ 订阅状态更新为"已订阅"
- ✅ 控制台显示购买成功日志

**实际结果**：
- [ ] ✅ 通过
- [ ] ❌ 失败（错误信息：________）

---

### 测试 4：订阅状态查询

**步骤**：
1. 购买后查看订阅状态
2. 检查订阅信息

**预期结果**：
- ✅ 订阅状态：已订阅
- ✅ 订阅类型：基础版月付
- ✅ 下载次数增加（+100 次）
- ✅ 到期时间正确显示

**实际结果**：
- [ ] ✅ 通过
- [ ] ❌ 失败（错误信息：________）

---

### 测试 5：恢复购买

**步骤**：
1. 点击"恢复购买"按钮
2. 查看恢复结果

**预期结果**：
- ✅ 显示恢复结果
- ✅ 如果有之前的购买，恢复成功

**实际结果**：
- [ ] ✅ 通过
- [ ] ❌ 失败（错误信息：________）

---

### 测试 6：多个产品购买

**步骤**：
1. 测试购买不同的产品
2. 验证每个产品都能正常购买

**测试产品**：
- [ ] 基础版月付
- [ ] 基础版年付
- [ ] 高级版月付
- [ ] 高级版年付
- [ ] 10次下载包
- [ ] 50次下载包
- [ ] 100次下载包

**实际结果**：
- [ ] ✅ 全部通过
- [ ] ❌ 部分失败（失败的产品：________）

---

## 🐛 问题记录

### 问题 1：________

**症状**：
- 

**错误信息**：
- 

**解决方法**：
- 

---

## 📊 测试结果汇总

### 测试通过率

- **总测试数**：6
- **通过数**：___
- **失败数**：___
- **通过率**：___%

### 功能状态

- [ ] ✅ 订阅可用性检查
- [ ] ✅ 产品列表获取
- [ ] ✅ 购买流程
- [ ] ✅ 订阅状态查询
- [ ] ✅ 恢复购买
- [ ] ✅ 多个产品购买

---

## 📝 备注

**测试环境**：
- iOS 版本：___
- 设备类型：模拟器 / 真机
- Xcode 版本：___

**测试时间**：
- 开始时间：___
- 结束时间：___

**其他说明**：
- 

---

**测试完成！** ✅
